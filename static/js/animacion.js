var x=$(document);var cont1=0;var cont2=1;var sentido=true;var pag=1;var ultima;var website;x.ready(preinicio);function preinicio(){var b=/novelles\/([a-z 0-9]+)-(([a-z 0-9]|-)+)\/([0-9]+)/;var a=new RegExp("novelles/"+$("#portada1 h1").html().toLowerCase()+"/([0-9]*)/","g");var c=getCookie("csrftoken");if(document.URL.match(b)){var d=document.URL;seccion="novelles";if(screen.width>=1024){$.post(d,{csrfmiddlewaretoken:c,keyword:"principal"},function(e){mostrarNoticiaDesktop(e)})}else{$.post(d,{csrfmiddlewaretoken:c,keyword:"principal"},function(e){mostrarPrincipalesMovil(e)})}showSigAnt()}else{if(document.URL.match(a)){seccion=$("#portada1 h1").html();website=document.URL;if(website.match(/landpage/)){pag=1}else{pag=website.match(/[1-9][0-9]*/)}showSigAnt()}else{seccion="novelles";website=document.URL;if(website.match(/landpage/)){pag=1}else{pag=website.match(/[1-9][0-9]*/)}showSigAnt()}}$(parent.document.getElementById("botonNews")).click(function(){if($(parent.document.getElementById("botonNews")).height()>0){parent.window.history.pushState("nada","COOL",window.location.pathname)}});$("#menuCool").click(function(){parent.window.history.pushState("nada","COOL","/");try{parent.mostrarPagina()}catch(f){window.location.reload(true)}});redimencionar();inicio()}function inicio(){corregirTexto();var a;var b;a=$("head");$(window).resize(redimencionar);if(screen.width>=1024){a=$(".recientes1, .recientes2");a.hover(showUp,showDown);a=$(".boton,.recientes1,.recientes2,#portada1");a.click(obtenerNoticias)}else{maquetacion();a=$("#botonMenu");a.click(mostrarMenuMovil);a=$(".boton");a.click(obtenerNoticias);a=$(".recientes1, .recientes2, #portada1");a.click(obtenerNoticias);$("#portada article:first-child").css("left","0px");setInterval("slide()",3000)}a=$("#buscar");a.click(buscar);a=$("#buscarInfo");a.keyup(busqueda);a=$("#menu nav ul li a");a.click(restaurarPagina);a=$("#noticias article a");a.click(restaurarPagina);a=$("header a");a.click(restaurarPagina);a=$("#siguiente");a.click(aumentarPagina);a=$("#anterior");a.click(disminuirPagina);a=$("#apartado article");a.click(obtenerNoticias);return}function mostrarPrincipalesMovil(d){var i=$(this);var h=$("#shown2");var g=$("#shown1");var b;var c=$("header");var a=$("#menu");var j=$("body");j.css("overflow","hidden");$("#botonr").html("Regresar");h.scrollTop(0);setTimeout(function(k){j.scrollTop(0);if(screen.width<=480){a.css("top","90px");$("#portada").css("top","90px");$("#noticias").css("top","90px");c.css("top","45px")}else{a.css("top","140px");$("#portada").css("top","140px");$("#noticias").css("top","140px");c.css("top","70px")}c.css("position","fixed");a.css("position","fixed");$("#portada").css("z-index","7");$("#menuCool").css("position","fixed")},1000);$("#shown3").children("h2").html(d.title);try{$("#shown3").children("img").attr("src","/media/"+d.picture[0])}catch(f){$("#shown3").children("img").attr("src","/static/img/coollogo.png")}$("#shown3").children("p").html(d.content);g.height(window.innerHeight-c.height()-$("#menuCool").height());h.height(window.innerHeight-c.height()-$("#menuCool").height());i=$("#botonr");i.click(function(k){$("#botonr").html("");j.css("overflow","auto");g.height("0vh");h.height("0vh");c.css("position","relative");c.css("top","0px");a.css("position","relative");$("#portada").css("z-index","9");$("#menuCool").css("position","relative");$("#portada").css("top","0px");$("#noticias").css("top","0px");setTimeout(function(l){a.css("top","0px")},1000)});return}function mostrarMenuMovil(){var a=$(this);var c=$("#menu");var b=$("#menu nav ul");var e=$("#shown1");var d=b.height();if(c.height()==0){a.css("background-color","orange");c.height(d+"px");if(screen.width<=480){e.css("top",d+90+"px")}else{e.css("top",d+140+"px")}}else{a.css("background-color","white");c.height(0+"px");if(screen.width<=480){e.css("top",90+"px")}else{e.css("top",140+"px")}}$("section, #menu nav").click(function(f){c.height(0);a.css("background-color","white");if(screen.width<=480){e.css("top",90+"px")}else{e.css("top",140+"px")}});return}function mostrarNoticiaMovil(b,c){var a=c;var d=a.parent();if(cont1==0){d.children("p").html(b.content);d.children("p").height("auto");d.children("p").css("white-space","normal");d.children("p").css("text-overflow","clip");a.html("Cacher");cont1=1}else{d.children("p").html(b.lid);d.children("p").height("auto");d.children("p").css("white-space","normal");a.html("Lire");cont1=0}return}function slide(){var e=1;var d=$("#portada article").length;var b=$("#portada article:nth-child("+cont2+")");var c=$("#portada article:nth-child("+(cont2+1)+")");var a=$("#portada article:nth-child("+(cont2-1)+")");if(cont2==e){sentido=true;cont2++;moverDerecha(b,c)}else{if(cont2==d){sentido=false;cont2--;moverIzquierda(b,a)}else{if(sentido){cont2++;moverDerecha(b,c)}else{cont2--;moverIzquierda(b,a)}}}return}function moverDerecha(a,b){a.css("left","100%");b.css("left","0px");return}function moverIzquierda(b,a){b.css("left","-100%");a.css("left","0px");return}function mostrarNoticiaDesktop(b){var d=$("#shown1");var a;a=$("#shown3");website=document.URL;fb();d.css("opacity","1");d.css("z-index","9");ocultarBusqueda();$("body").css("overflow-x","hidden");$("body").css("overflow-y","hidden");a.children("h2").html(b.title);try{a.children("img").attr("src","/media/"+b.picture[0])}catch(c){a.children("img").attr("src","/static/img/coollogo.png")}a.children("p").html(b.content);d.show(1000);x=$("#botonr");x.click(ocultar);return}function ocultar(){var a=$("#shown3");var b=$("#shown1");$("body").css("overflow-x","hidden");$("body").css("overflow-y","visible");b.css("opacity","0");b.css("z-index","-1");a.scrollTop(0);if(seccion!="novelles"){window.history.pushState("nada","COOL","/novelles/"+seccion.toLowerCase()+"/"+pag+"/");if($(parent.document.getElementById("botonNews")).height()>0){parent.window.history.pushState("nada","COOL",window.location.pathname)}}else{window.history.pushState("nada","COOL","/novelles/"+pag+"/");if($(parent.document.getElementById("botonNews")).height()>0){parent.window.history.pushState("nada","COOL",window.location.pathname)}}return}function showUp(){if($(this).is(".recientes1")){$(this).children("p").height("87%");$(this).children("h2").css("bottom","87%")}else{if($(this).is(".recientes2")){$(this).children("p").height("84%");$(this).children("h2").css("bottom","84%")}}return}function showDown(){$(this).children("p").height(0);$(this).children("h2").css("bottom","0px");return}function buscar(){var b=$(this);var e=$("#lupa1");var c=$("#lupa2");var a=$("#buscarInfo");var d=$("#portada");if(screen.width<=480){if(a.height()==0){e.css("display","none");c.css("display","block");b.css("background-color","#EDEBE4");a.height(100);d.css("top",0)}else{ocultarBusqueda()}$("#botonMenu,#portada,section").click(ocultarBusqueda)}else{if(screen.width<=1024){if(a.height()==0){e.css("display","none");c.css("display","block");b.css("background-color","#EDEBE4");a.height(100);d.css("top",0)}else{ocultarBusqueda()}$("#botonMenu,#portada,section").click(ocultarBusqueda)}else{if(a.height()==0){e.css("display","none");c.css("display","block");b.css("background-color","#EDEBE4");a.height(100);a.css("border","2px solid rgba(0,0,0,0.3)");d.css("top",146)}else{ocultarBusqueda()}}}}function ocultarBusqueda(){var b=$("#buscar");var e=$("#lupa1");var c=$("#lupa2");var a=$("#buscarInfo");var d=$("#portada");if(screen.width<=480){e.css("display","block");c.css("display","none");b.css("background-color","black");a.height(0);d.css("top",0)}else{if(screen.width<=1024){e.css("display","block");c.css("display","none");b.css("background-color","black");a.height(0);d.css("top",0)}else{e.css("display","block");c.css("display","none");b.css("background-color","black");a.height(0);a.css("border","0px solid rgba(0,0,0,0.3)");d.css("top",42)}}}function redimencionar(){var a;if(window.innerWidth>1024){a=(window.innerWidth-1024)/2;$("header").css("padding-left",a);$("header").css("padding-right",a);$("header").css("left",-(a+9));$("header").css("background-position",(a+85)+"px,"+(a+77.5)+"px");$("footer").css("padding-left",a);$("footer").css("padding-right",a);$("footer").css("left",-(a+9));$("#buscarInfo").css("left",-(a-7));$("#buscarInfo").css("width",(window.innerWidth-18))}}function mostrarSecciones(){var a=$("#recientes");var c=$("#portada1");var b=$("#portada");a.css("left","-100%");setTimeout(function(){a.css("display","none");b.css("overflow","visible")},1000);c.css("right","0%")}function mostrarPrincipales(){var a=$("#recientes");var c=$("#portada1");var b=$("#portada");a.css("display","block");b.css("overflow","hidden");setTimeout(function(){a.css("left","0%")},1);c.css("right","-100%")}function maquetacion(){var a=$("#portada");a.height(a.width()*0.55)}function corregirTexto(){var c=$("#recientes article");var b,a;a=c.length;for(var d=1;d<=a;d++){b=$("#recientes article:nth-child("+d+")").children("p").text();$("#recientes article:nth-child("+d+")").children("p").html(b)}c=$("#noticias article");a=c.length;for(var d=1;d<=a;d++){b=$("#noticias article:nth-child("+d+")").children("p").text();$("#noticias article:nth-child("+d+")").children("p").html(b)}c=$("#apartado article");a=c.length;for(var d=1;d<=a+1;d++){b=$("#apartado article:nth-child("+d+")").children("p").text();$("#apartado article:nth-child("+d+")").children("p").html(b)}}function fb(){var b=document.getElementById("fbcomments");var a="";a+='<fb:comments href="'+website+'"></fb:comments>';b.innerHTML=a;FB.XFBML.parse(b)};